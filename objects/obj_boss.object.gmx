<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_boss_idle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Initialize the boss
global.instances++;

// animation speed
image_speed = .16;

// boss health
hp = 10000;
maxhp = hp;

// idle state to start
state = scr_boss_idle;

// hit by fire or bullet
onFire = 0;
isHurt = 0;

// experience
xp = 2000;

// Particle system
part_smash_sys = part_system_create();

// Particle
part_smash = part_type_create();
part_type_sprite(part_smash, spr_smash_part, 0,  0, true);
part_type_size(part_smash, 0.5, 0.5, 0, 0);
part_type_alpha2(part_smash, 1, 0);
part_type_speed(part_smash, 0.8, 1, 0, 0);
part_type_orientation(part_smash, 0, 359, 0, 0, true);
part_type_direction(part_smash, 0, 359, 0, 0);
part_type_gravity(part_smash, 0.001, 90);
part_type_life(part_smash, 15, 20);

// Particle emitter
part_smash_emit = part_emitter_create(part_smash_sys);

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Fanfare of fireworks for killing boss
global.instances--;

instance_create(x, y+400, obj_fireworks);

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Attack

// Random boss text
switch(irandom(10))
{
    case 0:
        scr_textfloat(x,y-sprite_height,c_red,"Die mortal!"); 
        break;
    case 1:
        break;
    case 2:
        scr_textfloat(x,y-sprite_height,c_red,"You are mine now!");
        break;
    case 3:
        break;
    case 4:
        scr_textfloat(x,y-sprite_height,c_red,"Muhahaha! Time for you to die!");
        break;
    case 5:
        break;
    case 6:
        scr_textfloat(x,y-sprite_height,c_red,"You will join my army!");
        break;
    case 7:
        break;
    case 8:
        scr_textfloat(x,y-sprite_height,c_red,"...");
        break;
    case 9:
        break;
    case 10:
        scr_textfloat(x,y-sprite_height,c_red,":(");    
        break;
}

// Boss weapon smash
instance_create(x,y,obj_smash);

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Set direction

direction = irandom(359);

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Set depth
depth = -y;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// State
script_execute(state);
scr_onfire_step(0.5);   //burn
scr_ishurt_step(0.3);   //bleed

// Collisions
if (hspeed != 0) {
    if (!place_free(x+hspeed, y)) {
        if (hspeed &gt;0) move_contact_solid(0, hspeed);
        if (hspeed &lt;0) move_contact_solid(180, -hspeed);
        hspeed = 0;
    }
}
if (vspeed != 0) {
    if (!place_free(x+hspeed, y+vspeed)) {
        if (vspeed &gt;0) move_contact_solid(270, vspeed);
        if (vspeed &lt;0) move_contact_solid(90, -vspeed);
        vspeed = 0;
    }
}

// Boss Death
if (hp &lt;= 0)
{
    var i, drop_rate;
    drop_rate = irandom_range(20,40);
    for (i = 0; i &lt; drop_rate;  i++) instance_create(x,y,obj_coin);
    scr_textfloat(x,y-sprite_height,c_red,"Nooooooooo!!");
    with (obj_smash) instance_destroy();

    part_type_destroy(part_smash);
    part_system_destroy(part_smash_sys);
    
    add_screenshake(8, room_speed*4);
    scr_addxp(xp);
    global.kills++;
    instance_destroy();   
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_fire">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Fire damage to boss
hp -= other.damage;
if (onFire&lt;1)&amp;&amp;(other.damage&gt;0)onFire=room_speed/3;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_explosion1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Explosion damage
hp -= other.damage;
if (onFire &lt; 1)&amp;&amp;(other.damage&gt;0) {
    onFire=room_speed/2;
    scr_blood(x, y, 5, 15);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_knife_throw">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Throwing knife gets tossed back at player!
with (other) {
    if (obj_boss.x &lt; obj_player.x) {
        rot = -20;
        image_yscale *= -1;
    }
    else rot = 20;
    bosstoss = true;
    away = false;
    move_towards_point(obj_player.x,obj_player.y,knife_speed);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_machinegun_bullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// AK47 damage
scr_blood(other.x, other.y, 10, 20);
global.hits++;
isHurt = room_speed/4;
if (other.critdamage&gt;0)scr_textfloat(x,y-sprite_height,c_yellow,"-"+string(other.damage)+" (critical hit)");
else scr_textfloat(x,y-sprite_height,c_gray,"-"+string(other.damage));
hp -= other.damage;
// Play boss pain sound
audio_play_sound(snd_boss_pain, 8, false);
with (other) instance_destroy();

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_knife">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Knife (regular, stab) damage
if (other.image_index = 3) {
    scr_blood(x, y-40, 4, 8);
    hp -= other.damage;
    isHurt = room_speed/2;
    // Play boss pain sound
    audio_play_sound(snd_boss_pain, 8, false);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_player">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///  Damage player on contact
global.hp -= 1;
if (!global.hit) instance_create(0, 0, obj_screen_flash);
obj_player.isHurt = room_speed*2;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Boss health on screen
draw_set_color(c_white);
draw_set_halign(fa_left);
draw_set_font(font_ui_small);
// 
draw_healthbar((view_wview[0])*(7/10),15,(view_wview[0])*(7/10)+315,45,(hp/maxhp)*100,c_black,c_red,c_green,0,true,false);
draw_text((view_wview[0])*(7/10),30,"Boss HP: "+string(hp)+"/"+string(maxhp));

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw self
draw_sprite_ext(sprite_index,image_index,x,y,image_xscale/2,image_yscale*0.9,50,c_dkgray,0.3); //'shadow'

scr_onfire_draw(0.5,3);
scr_ishurt_draw(0.3,0.5,3,0);

// only draw self if not hurt, not on fire
if (isHurt &lt; 1 &amp;&amp; onFire &lt; 1) draw_self();

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>40,92</point>
    <point>50,50</point>
  </PhysicsShapePoints>
</object>
