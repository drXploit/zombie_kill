<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_gore_hand</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Parent creation
global.instances++;

dragX = x;
dragY = y;

tendancy = -1;
aliveModifier = -1;

alive = false;
attached = false;

life = room_speed*5;

gravity = .015;
gravity_direction = irandom(359);
friction = 0.04;

speed = random_range(5,8);
image_speed = 0;

bojangle = 45;


if ((gravity_direction + bojangle) &gt;= 359)
{
    direction = (359 + (gravity_direction + bojangle));
}
else
{
    direction = gravity_direction + bojangle;
}

image_angle = direction;

if (image_angle &gt; 90) &amp;&amp; (image_angle &lt; 270) 
    rot = -7;
else 
    rot = 7;

// fire
onFire = 0;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Destroy
global.instances--;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Bounce off walls etc

scr_onfire_step(0.5);

// The alive-linked "object" must exist.
// The speed must be very low.
// Gore object must be "not" alive (yet).
// If so, set reanimation into motion.

if (aliveModifier != -1) &amp;&amp; (speed &lt;= 0.11) &amp;&amp; (!alive)
{
    if (instance_exists(aliveModifier))
    {
        friction = 0;
        gravity_direction = 270;
        gravity = 0;
        speed = .5;
        alive = true;
        
        // sound
        audio_play_sound(snd_drag, 8, false);
        
        move_towards_point(aliveModifier.x,aliveModifier.y,speed);
    }
}

// If tendancy is set, defy the defaults, 
// and make sure gore goes in that direction (tendancy is dir)
if (tendancy != -1)
{
    if (tendancy == -3)
    {
        image_blend = c_white;
        onFire = room_speed * 2;
    }
    else if (tendancy == -2)
    {
        image_blend = c_white;

    //    effect_create_above(ef_smokeup,x,y,choose(0.3,0.5,0.8),image_blend);

        if (instance_exists(obj_blood_control))
        {
            surface_set_target(obj_blood_control.surf_blood);
            draw_sprite_ext(sprite_index,choose(0,1),x+irandom_range(-30,30),y+irandom_range(-30,30),image_xscale*0.9,image_yscale*0.9,choose(29,59,89,119,149,179,209,239,269,299,329,359),image_blend,image_alpha*0.8);
            surface_reset_target();
        }
        instance_destroy();
    }
    else
    {
        var randangle;
        randangle = irandom(bojangle);
        gravity_direction = tendancy;

        if ((gravity_direction + randangle) &gt;= 359)
            direction = (359 + (gravity_direction + randangle));
        else
            direction = gravity_direction + randangle;

    }    
    tendancy = -1;
}

if (rot == 1.4) || (rot == -1.4) || (rot == 6) || (rot == -6)
    // Play sound
    audio_play_sound(snd_light_thud, 8, false);

// this will rotate the gore object (and slowly stop rotating)
if (rot != 0)
{
    if (rot &lt; 0) 
        rot += 0.05;
    else if (rot &gt; 0) 
        rot -= 0.05;
}
image_angle += rot;

// Bounce if dead only, just a quick hack because of living gore getting stuck
if (!alive) 
    move_bounce_solid(true);


// This handles the gore object "A.I."
if (alive)
{
    if (!attached)
    {
        if (distance_to_point(aliveModifier.x,aliveModifier.y) &lt;= 20)
        {
    //        effect_create_above(ef_spark,mean(x,aliveModifier.x),mean(y,aliveModifier.y),2,c_white);
            speed = 0;
            image_angle = 0;
            image_alpha = 1;
            image_blend = c_white;
            image_xscale *= 0.9;
            image_yscale *= 0.9;
            attached = true;
            audio_play_sound(choose(snd_click1, snd_click2, snd_click3), 7, false);
        }
        else
        {
                move_towards_point(aliveModifier.x,aliveModifier.y,speed);
                image_angle = direction;
                if (friction == 0)
                {
                    // Play casing sound
                    audio_play_sound(choose(snd_drag, snd_drag2, snd_drag3), 7, false);
                }

                friction += .001;

                if (friction &gt;= .3) 
                { 
                    friction = 0;
                    speed = 1.8;
                    dragX = x;
                    dragY = y;
                }
        }
    }
    else
    {
        if (distance_to_point(aliveModifier.x,aliveModifier.y) &gt; 10)
            move_towards_point(aliveModifier.x,aliveModifier.y, 2);
        else
            speed = 0;
    }
}


if (!alive)
{
    if (speed &lt;= 0.1)
    {
        if (image_alpha &gt;= 0.3) 
            image_alpha -= 0.002;
   //     else 
   //         image_blend = c_gray;
    }
    else 
        friction += 0.001;

    life--;

 //   if (life == 20)
  //      effect_create_below(ef_cloud,x,y,0.5,c_maroon);

//    if (life == 10)
//        effect_create_below(ef_cloud,x,y,0.5,c_red);

    if (life &lt;= 0)
    {
        image_alpha = 0.9;
        if (sprite_index == spr_gore_torso)
        {
            image_xscale *= 0.9;
            image_yscale *= 0.9;
        }
        if (sprite_index == spr_gore_head)
        {
            var flip;
            flip = choose(1,-1);
            image_xscale *= (0.7*flip);
            image_yscale *= (0.7);
        }
    //    effect_create_above(ef_smokeup,x,y,1,c_gray);

        // Play grunt pain sound
        audio_play_sound(snd_whooshy_puff, 5, false);

        if (instance_exists(obj_blood_control))
        {
            surface_set_target(obj_blood_control.surf_blood);
            draw_sprite_ext(sprite_index,1,x,y,image_xscale,image_yscale,image_angle,image_blend,image_alpha);
            surface_reset_target();
        }
        instance_destroy();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_fire">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Fire damage

if (other.damage &gt; 0) 
    onFire = room_speed;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_explosion1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// For fire effect

if (onFire &lt; 1) 
    onFire = room_speed;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Clean
instance_destroy();

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Clean
instance_destroy();

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw

if (alive) &amp;&amp; (!attached) &amp;&amp; (speed &gt; 0.11)
{
    if (sprite_width &lt; 30)
        draw_sprite_ext(spr_gore_blood_slide,0,mean(x,dragX),mean(y,dragY),1.0,0.50,direction,image_blend,0.5);

    else
        draw_sprite_ext(spr_gore_blood_slide,0,mean(x,dragX),mean(y,dragY),1.0,1.0,direction,image_blend,0.5);

    if (instance_exists(aliveModifier))
        scr_laser(x,y,aliveModifier.x,aliveModifier.y,make_color_rgb(choose(120,128,140),0,choose(120,128,140)),c_black,0.3,7);

}

scr_onfire_draw(0.5,3);

if (onFire &lt; 1)
    draw_sprite_ext(sprite_index,image_index,x,y,image_xscale,image_yscale,image_angle,image_blend,image_alpha);





</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>7,7</point>
    <point>8,8</point>
  </PhysicsShapePoints>
</object>
